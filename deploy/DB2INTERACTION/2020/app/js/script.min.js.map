{"version":3,"sources":["../src/app/ts/main.ts","../src/app/ts/var/FileInfo.ts","../src/app/ts/view/Loading.ts","../src/app/ts/view/Video.ts","../src/app/ts/view/VideoEvent.ts","../src/app/ts/view/VideoLoadEvent.ts","../src/app/ts/view/VideoLoadProgressEvent.ts","../src/app/ts/view/VideoContainer.ts","../src/app/ts/view/VideoContainerLoadEvent.ts","../src/app/ts/job/Application.ts","../src/app/ts/job/TouchBReleaseARewind.ts","../src/app/ts/job/TouchBReleaseASync.ts","../src/app/ts/job/TouchPlayReleaseStop.ts"],"names":["project","FileInfo","data","this","fileName","startTime","_super","View","alm","view","Loading","__extends","prototype","implInitialize","getView","typeField","find","text","type","playButton","addClass","fileLogContainer","fileLogFields","fileCount","fileInfos","length","i","fileLogField","jQuery","append","push","updateFileLoadProgress","implReady","implFinalize","implShow","useTransition","cmd","Func","css","implHide","videoIndex","progressRatio","fileInfo","status","Math","floor","enablePlayButton","removeClass","on","playButtonClickHandler","_this","call","event","dispatchEventType","initialize","Video","player","document","createElement","autoplay","loop","muted","controls","setAttribute","isLoading","isLoaded","isPlaying","trace","load","addEventListener","loadProgressHandler","loadCompleteHandler","loadErrorHandler","playerEndedHandler","src","Date","now","play","pause","rewind","currentTime","seekVideo","seconds","loadEndAndDispatchEvent","eventType","removeEventListener","dispatchEvent","VideoLoadEvent","buffered","end","start","duration","VideoLoadProgressEvent","progress","complete","error","VideoEvent","Event","target","VideoContainer","videos","videoCount","video","ready","loadedVideoCount","videoLoadProgressHandler","videoLoadCompleteHandler","videoLoadErrorHandler","videoLoopHandler","showVideo","show","hideVideo","hide","playVideo","pauseVideo","rewindVideo","VideoContainerLoadEvent","DeviceInfo","browser","Application","run","loading","videoContainer","videoContainerLoadCompleteHandler","implPlay","implTouchStart","implTouchEnd","implLoop","getFileInfo","filePaths","screenfull","isEnabled","getIsTouchEnabled","window","touchStartHandler","touchEndHandler","mouseDownHandler","mouseUpHandler","contextMenuHandler","preventDefault","stopPropagation","dataList","TouchBReleaseARewind","clearTimeout","timeoutIdA","setTimeout","timeoutIdB","TouchBReleaseASync","activeVideoIndex","TouchPlayReleaseStop","application"],"mappings":"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","file":"script.min.js","sourcesContent":["/// <reference path=\"include.ts\" />\n\nnamespace project {\n\n\tjQuery(document).ready((): void => {\n\t\tlet application:Application = null;\n\n\t\tswitch (window['type']) {\n\t\t\tcase 0:\n\t\t\t\tapplication = new TouchPlayReleaseStop();\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tapplication = new TouchBReleaseARewind();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tapplication = new TouchBReleaseASync();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (application) {\n\t\t\tapplication.run();\n\t\t}\n\t});\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class FileInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(data:object) {\n\t\t\tthis.fileName = data['fileName'];\n\t\t\tthis.startTime = data['startTime'] || 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic readonly fileName:string;\n\t\tpublic readonly startTime:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Loading extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:JQuery, type:string, fileInfos:FileInfo[]) {\n\t\t\tsuper(view);\n\n\t\t\tthis.type = type;\n\t\t\tthis.fileInfos = fileInfos;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.typeField = view.find('#type');\n\t\t\tthis.typeField.text(this.type);\n\n\t\t\tthis.playButton = view.find('#play-button');\n\t\t\tthis.playButton.addClass('disabled');\n\t\t\tthis.playButton.text('LOADING');\n\n\t\t\tthis.fileLogContainer = view.find('#log');\n\t\t\tthis.fileLogFields = [];\n\t\t\tconst fileCount = this.fileInfos.length;\n\t\t\tif (fileCount > 0) {\n\t\t\t\tfor (let i = 0; i < fileCount; ++i) {\n\t\t\t\t\tconst fileLogField = jQuery('<div>');\n\t\t\t\t\tfileLogField.addClass('file');\n\t\t\t\t\tthis.fileLogContainer.append(fileLogField);\n\t\t\t\t\tthis.fileLogFields.push(fileLogField);\n\t\t\t\t\tthis.updateFileLoadProgress(i, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.fileLogContainer.text('error : no file');\n\t\t\t}\n\n\t\t\t//Logger.logger = new DOMLogging(this.logField.get(0), true);\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic updateFileLoadProgress(videoIndex:number, progressRatio:number):void {\n\t\t\tconst fileInfo = this.fileInfos[videoIndex];\n\n\t\t\tlet status = '';\n\t\t\tswitch (progressRatio) {\n\t\t\t\tcase -1:\n\t\t\t\t\tstatus = 'load error';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tstatus = 'load complete';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0:\n\t\t\t\t\tstatus = 'loading';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstatus = Math.floor(progressRatio * 100) + '%';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.fileLogFields[videoIndex].text(fileInfo.fileName + ' : ' + status);\n\t\t}\n\n\t\t//public appendMessage(message:string):void {\n\t\t//\tthis.log += message + '<br>';\n\t\t//\tthis.logField.html(this.log);\n\t\t//}\n\n\t\tpublic enablePlayButton():void {\n\t\t\tthis.playButton.text('START');\n\t\t\tthis.playButton.removeClass('disabled');\n\t\t\tthis.playButton.on('click', this.playButtonClickHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate playButtonClickHandler = (event:JQuery.ClickEvent):void => {\n\t\t\tthis.dispatchEventType('playButtonClick', this);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate typeField:JQuery;\n\n\t\tprivate fileInfos:FileInfo[];\n\t\tprivate fileLogContainer:JQuery;\n\t\tprivate fileLogFields:JQuery[];\n\n\t\tprivate playButton:JQuery;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Video extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(videoIndex:number, fileInfo:FileInfo) {\n\t\t\tsuper();\n\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.fileInfo = fileInfo;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('video');\n\n\t\t\tthis.player = document.createElement('video');\n\t\t\tthis.player.autoplay = false;\n\t\t\tthis.player.loop = false;\n\t\t\tthis.player.muted = false;\n\t\t\tthis.player.controls = false;\n\t\t\tthis.player.setAttribute('playsinline', '');\n\t\t\tview.append(jQuery(this.player));\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\ttrace('[Video] show : video index =', this.videoIndex);\n\t\t\t\t//view.css('opacity', 1);\n\t\t\t\t//view.css('left', '0');\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\ttrace('[Video] hide : video index =', this.videoIndex);\n\t\t\t\t//view.css('opacity', 0);\n\t\t\t\t//view.css('left', '100%');\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\ttrace('[Video] load start : url =', this.fileInfo.fileName);\n\t\t\tthis.player.addEventListener('progress', this.loadProgressHandler);\n\t\t\tthis.player.addEventListener('canplaythrough', this.loadCompleteHandler);\n\t\t\tthis.player.addEventListener('error', this.loadErrorHandler);\n\t\t\tthis.player.addEventListener('ended', this.playerEndedHandler);\n\t\t\tthis.player.src = this.fileInfo.fileName + '?' + Date.now();\n\t\t\tthis.player.load();\n\t\t}\n\n\t\tpublic play():void {\n\t\t\tif (!this.isLoaded || this.isPlaying) return;\n\t\t\tthis.isPlaying = true;\n\n\t\t\tthis.player.play();\n\t\t}\n\n\t\tpublic pause():void {\n\t\t\tif (!this.isLoaded || !this.isPlaying) return;\n\t\t\tthis.isPlaying = false;\n\n\t\t\tthis.player.pause();\n\t\t}\n\n\t\tpublic rewind():void {\n\t\t\tif (!this.isLoaded) return;\n\n\t\t\tthis.player.currentTime = 0;\n\t\t}\n\n\t\tpublic seekVideo(videoIndex:number, seconds:number):void {\n\t\t\tif (!this.isLoaded) return;\n\n\t\t\tthis.player.currentTime = seconds;\n\t\t\t//this.player.fastSeek(seconds);\n\t\t}\n\n\n\n\n\t\tprivate loadEndAndDispatchEvent(eventType:string):void {\n\t\t\ttrace('[Video] load complete : video index =', this.videoIndex);\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = true;\n\n\t\t\tthis.player.removeEventListener('progress', this.loadProgressHandler);\n\t\t\tthis.player.removeEventListener('canplaythrough', this.loadCompleteHandler);\n\t\t\tthis.player.removeEventListener('error', this.loadErrorHandler);\n\n\t\t\tthis.player.currentTime = 0;\n\n\t\t\tthis.dispatchEvent(new VideoLoadEvent(eventType, this, this.videoIndex, this.fileInfo));\n\t\t}\n\n\n\n\n\n\t\tprivate loadProgressHandler = (event:ProgressEvent):void => {\n\t\t\tlet progressRatio:number = 0;\n\t\t\tif (this.player.buffered.length > 0) {\n\t\t\t\tprogressRatio = (this.player.buffered.end(0) - this.player.buffered.start(0)) / this.player.duration;\n\t\t\t}\n\n\t\t\tthis.dispatchEvent(new VideoLoadProgressEvent(VideoLoadProgressEvent.progress, this, this.videoIndex, this.fileInfo, progressRatio));\n\t\t};\n\n\t\tprivate loadCompleteHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent(VideoLoadEvent.complete);\n\t\t};\n\n\t\tprivate loadErrorHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent(VideoLoadEvent.error);\n\t\t};\n\n\t\tprivate playerEndedHandler = ():void => {\n\t\t\tthis.player.play();\n\t\t\tthis.dispatchEvent(new VideoEvent(VideoEvent.loop, this, this.videoIndex, this.fileInfo));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate videoIndex:number;\n\t\tprivate fileInfo:FileInfo;\n\n\t\tprivate isLoading:boolean;\n\t\tprivate isLoaded:boolean;\n\t\tprivate isPlaying:boolean;\n\n\t\tprivate player:HTMLVideoElement;\n\t}\n}\n","/// <reference path=\"../include.ts\" />\n\nmodule project {\n\n\texport class VideoEvent extends alm.event.Event {\n\n\t\tpublic static readonly loop:string = 'VideoEvent.loop';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object, videoIndex:number, fileInfo:FileInfo) {\n\t\t\tsuper(eventType, target);\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.fileInfo = fileInfo;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic readonly videoIndex:number;\n\t\tpublic readonly fileInfo:FileInfo;\n\t}\n}\n","/// <reference path=\"../include.ts\" />\n\nmodule project {\n\n\texport class VideoLoadEvent extends alm.event.Event {\n\n\t\tpublic static readonly complete:string = 'VideoLoadEvent.complete';\n\t\tpublic static readonly error:string = 'VideoLoadEvent.error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object, videoIndex:number, fileInfo:FileInfo) {\n\t\t\tsuper(eventType, target);\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.fileInfo = fileInfo;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic readonly videoIndex:number;\n\t\tpublic readonly fileInfo:FileInfo;\n\t}\n}\n","/// <reference path=\"../include.ts\" />\n\nmodule project {\n\n\timport FileInfo = project.FileInfo;\n\n\texport class VideoLoadProgressEvent extends alm.event.Event {\n\n\t\tpublic static readonly progress:string = 'VideoLoadProgressEvent.progress';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object, videoIndex:number, fileInfo:FileInfo, progressRatio:number) {\n\t\t\tsuper(eventType, target);\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.fileInfo = fileInfo;\n\t\t\tthis.progressRatio = progressRatio;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic readonly videoIndex:number;\n\t\tpublic readonly fileInfo:FileInfo;\n\t\tpublic readonly progressRatio:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\timport Event = alm.event.Event;\n\n\texport class VideoContainer extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(fileInfos:FileInfo[]) {\n\t\t\tsuper(jQuery('#video-container'));\n\n\t\t\tthis.fileInfos = fileInfos;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.videos = [];\n\t\t\tthis.videoCount = this.fileInfos.length;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = new Video(i, this.fileInfos[i]);\n\t\t\t\tvideo.ready();\n\t\t\t\tview.append(video.getView());\n\t\t\t\tthis.videos.push(video);\n\t\t\t}\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tthis.loadedVideoCount = 0;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = this.videos[i];\n\t\t\t\tvideo.addEventListener(VideoLoadProgressEvent.progress, this.videoLoadProgressHandler);\n\t\t\t\tvideo.addEventListener(VideoLoadEvent.complete, this.videoLoadCompleteHandler);\n\t\t\t\tvideo.addEventListener(VideoLoadEvent.error, this.videoLoadErrorHandler);\n\t\t\t\tvideo.addEventListener(VideoEvent.loop, this.videoLoopHandler);\n\t\t\t\tvideo.load();\n\t\t\t}\n\t\t}\n\n\t\tpublic showVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].show();\n\t\t}\n\n\t\tpublic hideVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].hide();\n\t\t}\n\n\t\tpublic playVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].play();\n\t\t}\n\n\t\tpublic pauseVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].pause();\n\t\t}\n\n\t\tpublic rewindVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].rewind();\n\t\t}\n\n\t\tpublic seekVideo(videoIndex:number, seconds:number):void {\n\t\t\tthis.videos[videoIndex].seekVideo(videoIndex, seconds);\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadProgressHandler = (event:VideoLoadProgressEvent):void => {\n\t\t\t// propagating video event\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\tprivate videoLoadCompleteHandler = (event:VideoLoadEvent):void => {\n\t\t\t// propagating video event\n\t\t\tthis.dispatchEvent(event);\n\n\t\t\t// loaded all\n\t\t\tif (++this.loadedVideoCount == this.videoCount) {\n\t\t\t\tthis.dispatchEvent(new VideoContainerLoadEvent(VideoContainerLoadEvent.complete, this));\n\t\t\t}\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:VideoLoadEvent):void => {\n\t\t\t// propagating video event\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:VideoEvent):void => {\n\t\t\t// propagating video event\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate fileInfos:FileInfo[];\n\n\t\tprivate videos:Video[];\n\t\tprivate videoCount:number;\n\t\tprivate loadedVideoCount:number;\n\t}\n}\n","/// <reference path=\"../include.ts\" />\n\nmodule project {\n\n\texport class VideoContainerLoadEvent extends alm.event.Event {\n\n\t\tpublic static readonly complete:string = 'VideoContainerLoadEvent.complete';\n\t\tpublic static readonly error:string = 'VideoContainerLoadEvent.error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object) {\n\t\t\tsuper(eventType, target);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport Event = alm.event.Event;\n\timport DeviceInfo = alm.browser.DeviceInfo;\n\n\texport class Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(type:string, filePaths:string[]) {\n\t\t\tthis.type = type;\n\t\t\tthis.fileInfos = [];\n\n\t\t\tconst dataList = window['assetInfos'];\n\t\t\tif (dataList) {\n\t\t\t\tconst fileCount = dataList.length;\n\t\t\t\tfor (let i = 0; i < fileCount; ++i) {\n\t\t\t\t\tthis.fileInfos.push(new FileInfo(dataList[i]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst fileCount = filePaths.length;\n\t\t\t\tfor (let i = 0; i < fileCount; ++i) {\n\t\t\t\t\tthis.fileInfos.push(new FileInfo({ fileName: filePaths[i] }));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic run():void {\n\t\t\tthis.loading = new Loading(jQuery('#loading'), this.type, this.fileInfos);\n\t\t\tthis.loading.addEventListener('playButtonClick', this.playButtonClickHandler);\n\t\t\tthis.loading.ready();\n\t\t\tthis.loading.show();\n\n\t\t\tthis.videoContainer = new VideoContainer(this.fileInfos);\n\t\t\tthis.videoContainer.ready();\n\t\t\tthis.videoContainer.addEventListener(VideoLoadProgressEvent.progress, this.videoLoadProgressHandler);\n\t\t\tthis.videoContainer.addEventListener(VideoLoadEvent.complete, this.videoLoadCompleteHandler);\n\t\t\tthis.videoContainer.addEventListener(VideoLoadEvent.error, this.videoLoadErrorHandler);\n\t\t\tthis.videoContainer.addEventListener(VideoContainerLoadEvent.complete, this.videoContainerLoadCompleteHandler);\n\t\t\tthis.videoContainer.addEventListener(VideoEvent.loop, this.videoLoopHandler);\n\t\t\tthis.videoContainer.load();\n\t\t}\n\n\n\n\n\n\t\tprotected showVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.showVideo(videoIndex);\n\t\t}\n\n\t\tprotected hideVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.hideVideo(videoIndex);\n\t\t}\n\n\t\tprotected playVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.playVideo(videoIndex);\n\t\t}\n\n\t\tprotected pauseVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.pauseVideo(videoIndex);\n\t\t}\n\n\t\tprotected rewindVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.rewindVideo(videoIndex);\n\t\t}\n\n\t\tprotected seekVideo(videoIndex:number, seconds:number):void {\n\t\t\tthis.videoContainer.seekVideo(videoIndex, seconds);\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadCompleteHandler = (event:VideoLoadEvent):void => {\n\t\t\tthis.loading.updateFileLoadProgress(event.videoIndex, 1);\n\t\t\t//this.loading.appendMessage('load complete : ' + event.fileInfo.fileName);\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:VideoLoadEvent):void => {\n\t\t\tthis.loading.updateFileLoadProgress(event.videoIndex, -1);\n\t\t\t//this.loading.appendMessage('load error : ' + event.fileInfo.fileName);\n\t\t};\n\n\t\tprivate videoLoadProgressHandler = (event:VideoLoadProgressEvent):void => {\n\t\t\tthis.loading.updateFileLoadProgress(event.videoIndex, event.progressRatio);\n\t\t\t//this.loading.appendMessage('load progress : ' + this.fileInfos[event.data].fileName);\n\t\t};\n\n\t\tprivate videoContainerLoadCompleteHandler = (event:VideoContainerLoadEvent):void => {\n\t\t\t//this.loading.appendMessage('load complete all');\n\t\t\tthis.loading.enablePlayButton();\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:VideoEvent):void => {\n\t\t\tconst videoIndex = event.videoIndex;\n\t\t\tthis.implLoop(videoIndex);\n\t\t};\n\n\t\tprivate playButtonClickHandler = (event:Event):void => {\n\t\t\tthis.loading.hide();\n\n\t\t\t// set fullscreen\n\t\t\ttrace('[Application] fullscreen capability :', screenfull.isEnabled);\n\t\t\tif (screenfull.isEnabled) {\n\t\t\t\tscreenfull['request']();\n\t\t\t}\n\n\t\t\t// setup interaction\n\t\t\tif (DeviceInfo.getIsTouchEnabled()) {\n\t\t\t\ttrace('[Application] setup with touch interaction');\n\t\t\t\twindow.addEventListener('touchstart', this.touchStartHandler);\n\t\t\t\twindow.addEventListener('touchend', this.touchEndHandler);\n\t\t\t} else {\n\t\t\t\ttrace('[Application] setup with mouse interaction');\n\t\t\t\twindow.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\t\twindow.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\t}\n\n\t\t\twindow.addEventListener('contextmenu', this.contextMenuHandler);\n\n\t\t\t// setup init state\n\t\t\tthis.videoContainer.show();\n\t\t\tthis.implPlay();\n\t\t};\n\n\n\n\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate contextMenuHandler = (event:any):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\n\n\n\n\t\tprotected implPlay():void {\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t}\n\n\n\n\n\t\tpublic getFileInfo(videoIndex:number):FileInfo {\n\t\t\treturn this.fileInfos[videoIndex];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate fileInfos:FileInfo[];\n\n\t\tprivate loading:Loading;\n\t\tprivate videoContainer:VideoContainer;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseARewind extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A (Rewind)', ['a.mp4', 'b.mp4']);\n\n\t\t\tthis.timeoutIdA = -1;\n\t\t\tthis.timeoutIdB = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// A\n\t\t\tthis.seekVideo(0, this.getFileInfo(0).startTime);\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// A\n\t\t\twindow.clearTimeout(this.timeoutIdA);\n\t\t\tthis.timeoutIdA = window.setTimeout(():void => {\n\t\t\t\tthis.pauseVideo(0);\n\t\t\t\tthis.rewindVideo(0);\n\t\t\t}, 50);\n\n\t\t\t// B\n\t\t\twindow.clearTimeout(this.timeoutIdB);\n\t\t\tthis.showVideo(1);\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// A\n\t\t\twindow.clearTimeout(this.timeoutIdA);\n\t\t\tthis.playVideo(0);\n\n\t\t\t// B\n\t\t\tthis.hideVideo(1);\n\t\t\twindow.clearTimeout(this.timeoutIdB);\n\t\t\tthis.timeoutIdB = window.setTimeout(():void => {\n\t\t\t\tthis.pauseVideo(1);\n\t\t\t\tthis.rewindVideo(1);\n\t\t\t}, 50);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate timeoutIdA:number;\n\t\tprivate timeoutIdB:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseASync extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A - Sync', ['a.mp4', 'b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\n\t\t\t// play B in background\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\tthis.activeVideoIndex = 1;\n\n\t\t\t// hide A\n\t\t\tthis.hideVideo(0);\n\n\t\t\t// show B\n\t\t\tthis.showVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// hide B\n\t\t\tthis.hideVideo(1);\n\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t\tif (videoIndex == this.activeVideoIndex) {\n\t\t\t\tthis.rewindVideo(1 - videoIndex);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate activeVideoIndex:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchPlayReleaseStop extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch Play & Release Stop', ['a.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// play A\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// pause A\n\t\t\tthis.pauseVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n"]}