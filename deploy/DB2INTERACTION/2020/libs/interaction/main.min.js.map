{"version":3,"sources":["../src/lib/interaction/script/main.ts","../src/lib/interaction/script/view/Loading.ts","../src/lib/interaction/script/view/VideoContainer.ts","../src/lib/interaction/script/view/Video.ts","../src/lib/interaction/script/application/Application.ts","../src/lib/interaction/script/application/TouchPlayReleaseStop.ts","../src/lib/interaction/script/application/TouchBReleaseARewind.ts","../src/lib/interaction/script/application/TouchBReleaseASync.ts"],"names":["project","_super","View","alm","view","Loading","__extends","prototype","implInitialize","this","getView","typeField","find","text","type","playButton","addClass","logField","log","implReady","implFinalize","implShow","useTransition","cmd","Func","css","implHide","appendMessage","message","html","enablePlayButton","removeClass","on","playButtonClickHandler","_this","call","event","dispatchEventType","initialize","VideoContainer","videos","videoCount","filePaths","length","i","video","Video","ready","append","push","load","loadedVideoCount","addEventListener","videoLoadSuccessHandler","videoLoadErrorHandler","videoLoopHandler","showVideo","videoIndex","show","hideVideo","hide","playVideo","play","pauseVideo","pause","rewindVideo","rewind","jQuery","getData","player","document","createElement","autoplay","loop","muted","controls","setAttribute","isLoading","isLoaded","isPlaying","trace","filePath","oncanplay","loadSuccessHandler","onerror","loadErrorHandler","onended","playerEndedHandler","src","Date","now","currentTime","loadEndAndDispatchEvent","eventType","DeviceInfo","browser","Application","start","loading","videoContainer","videoLoadCompleteHandler","implPlay","implTouchStart","implTouchEnd","implLoop","screenfull","isEnabled","getIsTouchEnabled","window","touchStartHandler","touchEndHandler","mouseDownHandler","mouseUpHandler","preventDefault","stopPropagation","TouchPlayReleaseStop","TouchBReleaseARewind","TouchBReleaseASync","activeVideoIndex","application"],"mappings":"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","file":"main.min.js","sourcesContent":["///<reference path=\"include.ts\" />\n\nnamespace project {\n\n\tlet application:Application = null;\n\n\tswitch (window['type']) {\n\t\tcase 0:\n\t\t\tapplication = new TouchPlayReleaseStop();\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tapplication = new TouchBReleaseARewind();\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tapplication = new TouchBReleaseASync();\n\t\t\tbreak;\n\t}\n\n\tif (application) {\n\t\tapplication.start();\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Loading extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:JQuery, type:string) {\n\t\t\tsuper(view);\n\n\t\t\tthis.type = type;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.typeField = view.find('#type');\n\t\t\tthis.typeField.text(this.type);\n\n\t\t\tthis.playButton = view.find('#play-button');\n\t\t\tthis.playButton.addClass('disabled');\n\t\t\tthis.playButton.text('LOADING');\n\n\t\t\tthis.logField = view.find('#log');\n\t\t\tthis.log = '';\n\n\t\t\t//Logger.logger = new DOMLogging(this.logField.get(0), true);\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic appendMessage(message:string):void {\n\t\t\tthis.log += message + '<br>';\n\t\t\tthis.logField.html(this.log);\n\t\t}\n\n\t\tpublic enablePlayButton():void {\n\t\t\tthis.playButton.text('PLAY');\n\t\t\tthis.playButton.removeClass('disabled');\n\t\t\tthis.playButton.on('click', this.playButtonClickHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate playButtonClickHandler = (event:JQuery.ClickEvent):void => {\n\t\t\tthis.dispatchEventType('playButtonClick', this);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate typeField:JQuery;\n\n\t\tprivate playButton:JQuery;\n\n\t\tprivate log:string;\n\t\tprivate logField:JQuery;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\timport Event = alm.event.Event;\n\n\texport class VideoContainer extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(filePaths:string[]) {\n\t\t\tsuper(jQuery('#video-container'));\n\n\t\t\tthis.filePaths = filePaths;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.videos = [];\n\t\t\tthis.videoCount = this.filePaths.length;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = new Video(i, this.filePaths[i]);\n\t\t\t\tvideo.ready();\n\t\t\t\tview.append(video.getView());\n\t\t\t\tthis.videos.push(video);\n\t\t\t}\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tthis.loadedVideoCount = 0;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = this.videos[i];\n\t\t\t\tvideo.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\t\tvideo.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\t\tvideo.addEventListener('loop', this.videoLoopHandler);\n\t\t\t\tvideo.load();\n\t\t\t}\n\t\t}\n\n\t\tpublic showVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].show();\n\t\t}\n\n\t\tpublic hideVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].hide();\n\t\t}\n\n\t\tpublic playVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].play();\n\t\t}\n\n\t\tpublic pauseVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].pause();\n\t\t}\n\n\t\tpublic rewindVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].rewind();\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadSuccess', this, event.getData());\n\n\t\t\tif (++this.loadedVideoCount == this.videoCount) {\n\t\t\t\tthis.dispatchEventType('loadComplete', this);\n\t\t\t}\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadError', this, event.getData());\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loop', this, event.getData());\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate filePaths:string[];\n\n\t\tprivate videos:Video[];\n\t\tprivate videoCount:number;\n\t\tprivate loadedVideoCount:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Video extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(videoIndex:number, filePath:string) {\n\t\t\tsuper();\n\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.filePath = filePath;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('video');\n\n\t\t\tthis.player = document.createElement('video');\n\t\t\tthis.player.autoplay = false;\n\t\t\tthis.player.loop = false;\n\t\t\tthis.player.muted = false;\n\t\t\tthis.player.controls = false;\n\t\t\tthis.player.setAttribute('playsinline', '');\n\t\t\tview.append(jQuery(this.player));\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\ttrace('[Video] load start : url =', this.filePath);\n\t\t\tthis.player.oncanplay = this.loadSuccessHandler;\n\t\t\tthis.player.onerror = this.loadErrorHandler;\n\t\t\tthis.player.onended = this.playerEndedHandler;\n\t\t\tthis.player.src = this.filePath + '?' + Date.now();\n\t\t\tthis.player.load();\n\t\t}\n\n\t\tpublic play():void {\n\t\t\tif (!this.isLoaded || this.isPlaying) return;\n\t\t\tthis.isPlaying = true;\n\n\t\t\tthis.player.play();\n\t\t}\n\n\t\tpublic pause():void {\n\t\t\tif (!this.isLoaded || !this.isPlaying) return;\n\t\t\tthis.isPlaying = false;\n\n\t\t\tthis.player.pause();\n\t\t}\n\n\t\tpublic rewind():void {\n\t\t\tif (!this.isLoaded) return;\n\n\t\t\tthis.player.currentTime = 0;\n\t\t}\n\n\n\n\n\n\t\tprivate loadEndAndDispatchEvent(eventType:string):void {\n\t\t\ttrace('[Video] load complete : video index =', this.videoIndex);\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = true;\n\n\t\t\tthis.player.oncanplay = null;\n\t\t\tthis.player.onerror = null;\n\n\t\t\tthis.dispatchEventType(eventType, this,  this.videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate loadSuccessHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadSuccess');\n\t\t};\n\n\t\tprivate loadErrorHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadError');\n\t\t};\n\n\t\tprivate playerEndedHandler = ():void => {\n\t\t\tthis.player.play();\n\t\t\tthis.dispatchEventType('loop', this,  this.videoIndex);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate videoIndex:number;\n\t\tprivate filePath:string;\n\n\t\tprivate isLoading:boolean;\n\t\tprivate isLoaded:boolean;\n\t\tprivate isPlaying:boolean;\n\t\tprivate player:HTMLVideoElement;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport Event = alm.event.Event;\n\timport DeviceInfo = alm.browser.DeviceInfo;\n\n\texport class Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(type:string, filePaths:string[]) {\n\t\t\tthis.type = type;\n\t\t\tthis.filePaths = filePaths;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tthis.loading = new Loading(jQuery('#loading'), this.type);\n\t\t\tthis.loading.addEventListener('playButtonClick', this.playButtonClickHandler);\n\t\t\tthis.loading.ready();\n\t\t\tthis.loading.show();\n\n\t\t\tthis.videoContainer = new VideoContainer(this.filePaths);\n\t\t\tthis.videoContainer.ready();\n\t\t\tthis.videoContainer.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\tthis.videoContainer.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\tthis.videoContainer.addEventListener('loadComplete', this.videoLoadCompleteHandler);\n\t\t\tthis.videoContainer.addEventListener('loop', this.videoLoopHandler);\n\t\t\tthis.videoContainer.load();\n\t\t}\n\n\n\n\n\n\t\tprotected showVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.showVideo(videoIndex);\n\t\t}\n\n\t\tprotected hideVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.hideVideo(videoIndex);\n\t\t}\n\n\t\tprotected playVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.playVideo(videoIndex);\n\t\t}\n\n\t\tprotected pauseVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.pauseVideo(videoIndex);\n\t\t}\n\n\t\tprotected rewindVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.rewindVideo(videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load success : ' + this.filePaths[event.getData()]);\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load error : ' + this.filePaths[event.getData()]);\n\t\t};\n\n\t\tprivate videoLoadCompleteHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load complete');\n\t\t\tthis.loading.enablePlayButton();\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tconst videoIndex = event.getData();\n\t\t\t//this.loading.appendMessage('loop : ' + this.filePaths[videoIndex]);\n\t\t\tthis.implLoop(videoIndex);\n\t\t};\n\n\t\tprivate playButtonClickHandler = (event:Event):void => {\n\t\t\tthis.loading.hide();\n\n\t\t\t// set fullscreen\n\t\t\ttrace('[Application] fullscreen capability :', screenfull.isEnabled);\n\t\t\tif (screenfull.isEnabled) {\n\t\t\t\tscreenfull['request']();\n\t\t\t}\n\n\t\t\t// setup interaction\n\t\t\tif (DeviceInfo.getIsTouchEnabled()) {\n\t\t\t\ttrace('[Application] setup with touch interaction');\n\t\t\t\twindow.addEventListener('touchstart', this.touchStartHandler);\n\t\t\t\twindow.addEventListener('touchend', this.touchEndHandler);\n\t\t\t} else {\n\t\t\t\ttrace('[Application] setup with mouse interaction');\n\t\t\t\twindow.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\t\twindow.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\t}\n\n\t\t\t// setup init state\n\t\t\tthis.videoContainer.show();\n\t\t\tthis.implPlay();\n\t\t};\n\n\n\n\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\n\n\n\n\t\tprotected implPlay():void {\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate filePaths:string[];\n\n\t\tprivate loading:Loading;\n\t\tprivate videoContainer:VideoContainer;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchPlayReleaseStop extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch Play & Release Stop', ['data/a.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// play A\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// pause A\n\t\t\tthis.pauseVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseARewind extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A - Rewind', ['data/a.mp4', 'data/b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// stop A\n\t\t\tthis.hideVideo(0);\n\t\t\tthis.pauseVideo(0);\n\t\t\tthis.rewindVideo(0);\n\n\t\t\t// play B\n\t\t\tthis.showVideo(1);\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// stop B\n\t\t\tthis.hideVideo(1);\n\t\t\tthis.pauseVideo(1);\n\t\t\tthis.rewindVideo(1);\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseASync extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A - Sync', ['data/a.mp4', 'data/b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\n\t\t\t// play B in background\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\tthis.activeVideoIndex = 1;\n\n\t\t\t// hide A\n\t\t\tthis.hideVideo(0);\n\n\t\t\t// show B\n\t\t\tthis.showVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// hide B\n\t\t\tthis.hideVideo(1);\n\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t\tif (videoIndex == this.activeVideoIndex) {\n\t\t\t\tthis.rewindVideo(1 - videoIndex);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate activeVideoIndex:number;\n\t}\n}\n"]}