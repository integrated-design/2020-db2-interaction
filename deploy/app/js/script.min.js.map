{"version":3,"sources":["../src/app/ts/main.ts","../src/app/ts/view/Loading.ts","../src/app/ts/view/Video.ts","../src/app/ts/view/VideoContainer.ts","../src/app/ts/job/Application.ts","../src/app/ts/job/TouchBReleaseARewind.ts","../src/app/ts/job/TouchBReleaseASync.ts","../src/app/ts/job/TouchPlayReleaseStop.ts"],"names":["project","_super","View","alm","view","Loading","__extends","prototype","implInitialize","this","getView","typeField","find","text","type","playButton","addClass","logField","log","implReady","implFinalize","implShow","useTransition","cmd","Func","css","implHide","appendMessage","message","html","enablePlayButton","removeClass","on","playButtonClickHandler","_this","call","event","dispatchEventType","initialize","Video","jQuery","player","document","createElement","autoplay","loop","muted","controls","setAttribute","append","isLoading","isLoaded","isPlaying","load","trace","filePath","oncanplay","loadSuccessHandler","onerror","loadErrorHandler","onended","playerEndedHandler","src","Date","now","play","pause","rewind","currentTime","loadEndAndDispatchEvent","eventType","videoIndex","VideoContainer","videos","videoCount","filePaths","length","i","video","ready","push","loadedVideoCount","addEventListener","videoLoadSuccessHandler","videoLoadErrorHandler","videoLoopHandler","showVideo","show","hideVideo","hide","playVideo","pauseVideo","rewindVideo","data","DeviceInfo","browser","Application","run","loading","videoContainer","videoLoadCompleteHandler","implPlay","implTouchStart","implTouchEnd","implLoop","screenfull","isEnabled","getIsTouchEnabled","window","touchStartHandler","touchEndHandler","mouseDownHandler","mouseUpHandler","contextMenuHandler","preventDefault","stopPropagation","TouchBReleaseARewind","TouchBReleaseASync","activeVideoIndex","TouchPlayReleaseStop","application"],"mappings":"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","file":"script.min.js","sourcesContent":["/// <reference path=\"include.ts\" />\n\nnamespace project {\n\n\tjQuery(document).ready((): void => {\n\t\tlet application:Application = null;\n\n\t\tswitch (window['type']) {\n\t\t\tcase 0:\n\t\t\t\tapplication = new TouchPlayReleaseStop();\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tapplication = new TouchBReleaseARewind();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tapplication = new TouchBReleaseASync();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (application) {\n\t\t\tapplication.run();\n\t\t}\n\t});\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Loading extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:JQuery, type:string) {\n\t\t\tsuper(view);\n\n\t\t\tthis.type = type;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.typeField = view.find('#type');\n\t\t\tthis.typeField.text(this.type);\n\n\t\t\tthis.playButton = view.find('#play-button');\n\t\t\tthis.playButton.addClass('disabled');\n\t\t\tthis.playButton.text('LOADING');\n\n\t\t\tthis.logField = view.find('#log');\n\t\t\tthis.log = '';\n\n\t\t\t//Logger.logger = new DOMLogging(this.logField.get(0), true);\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic appendMessage(message:string):void {\n\t\t\tthis.log += message + '<br>';\n\t\t\tthis.logField.html(this.log);\n\t\t}\n\n\t\tpublic enablePlayButton():void {\n\t\t\tthis.playButton.text('START');\n\t\t\tthis.playButton.removeClass('disabled');\n\t\t\tthis.playButton.on('click', this.playButtonClickHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate playButtonClickHandler = (event:JQuery.ClickEvent):void => {\n\t\t\tthis.dispatchEventType('playButtonClick', this);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate typeField:JQuery;\n\n\t\tprivate playButton:JQuery;\n\n\t\tprivate log:string;\n\t\tprivate logField:JQuery;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Video extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(videoIndex:number, filePath:string) {\n\t\t\tsuper();\n\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.filePath = filePath;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('video');\n\n\t\t\tthis.player = document.createElement('video');\n\t\t\tthis.player.autoplay = false;\n\t\t\tthis.player.loop = false;\n\t\t\tthis.player.muted = false;\n\t\t\tthis.player.controls = false;\n\t\t\tthis.player.setAttribute('playsinline', '');\n\t\t\tview.append(jQuery(this.player));\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\ttrace('[Video] load start : url =', this.filePath);\n\t\t\tthis.player.oncanplay = this.loadSuccessHandler;\n\t\t\tthis.player.onerror = this.loadErrorHandler;\n\t\t\tthis.player.onended = this.playerEndedHandler;\n\t\t\tthis.player.src = this.filePath + '?' + Date.now();\n\t\t\tthis.player.load();\n\t\t}\n\n\t\tpublic play():void {\n\t\t\tif (!this.isLoaded || this.isPlaying) return;\n\t\t\tthis.isPlaying = true;\n\n\t\t\tthis.player.play();\n\t\t}\n\n\t\tpublic pause():void {\n\t\t\tif (!this.isLoaded || !this.isPlaying) return;\n\t\t\tthis.isPlaying = false;\n\n\t\t\tthis.player.pause();\n\t\t}\n\n\t\tpublic rewind():void {\n\t\t\tif (!this.isLoaded) return;\n\n\t\t\tthis.player.currentTime = 0;\n\t\t}\n\n\n\n\n\n\t\tprivate loadEndAndDispatchEvent(eventType:string):void {\n\t\t\ttrace('[Video] load complete : video index =', this.videoIndex);\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = true;\n\n\t\t\tthis.player.oncanplay = null;\n\t\t\tthis.player.onerror = null;\n\n\t\t\tthis.dispatchEventType(eventType, this, this.videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate loadSuccessHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadSuccess');\n\t\t};\n\n\t\tprivate loadErrorHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadError');\n\t\t};\n\n\t\tprivate playerEndedHandler = ():void => {\n\t\t\tthis.player.play();\n\t\t\tthis.dispatchEventType('loop', this, this.videoIndex);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate videoIndex:number;\n\t\tprivate filePath:string;\n\n\t\tprivate isLoading:boolean;\n\t\tprivate isLoaded:boolean;\n\t\tprivate isPlaying:boolean;\n\t\tprivate player:HTMLVideoElement;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\timport Event = alm.event.Event;\n\n\texport class VideoContainer extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(filePaths:string[]) {\n\t\t\tsuper(jQuery('#video-container'));\n\n\t\t\tthis.filePaths = filePaths;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.videos = [];\n\t\t\tthis.videoCount = this.filePaths.length;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = new Video(i, this.filePaths[i]);\n\t\t\t\tvideo.ready();\n\t\t\t\tview.append(video.getView());\n\t\t\t\tthis.videos.push(video);\n\t\t\t}\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tthis.loadedVideoCount = 0;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = this.videos[i];\n\t\t\t\tvideo.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\t\tvideo.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\t\tvideo.addEventListener('loop', this.videoLoopHandler);\n\t\t\t\tvideo.load();\n\t\t\t}\n\t\t}\n\n\t\tpublic showVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].show();\n\t\t}\n\n\t\tpublic hideVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].hide();\n\t\t}\n\n\t\tpublic playVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].play();\n\t\t}\n\n\t\tpublic pauseVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].pause();\n\t\t}\n\n\t\tpublic rewindVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].rewind();\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadSuccess', this, event.data);\n\n\t\t\tif (++this.loadedVideoCount == this.videoCount) {\n\t\t\t\tthis.dispatchEventType('loadComplete', this);\n\t\t\t}\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadError', this, event.data);\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loop', this, event.data);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate filePaths:string[];\n\n\t\tprivate videos:Video[];\n\t\tprivate videoCount:number;\n\t\tprivate loadedVideoCount:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport Event = alm.event.Event;\n\timport DeviceInfo = alm.browser.DeviceInfo;\n\n\texport class Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(type:string, filePaths:string[]) {\n\t\t\tthis.type = type;\n\t\t\tthis.filePaths = filePaths;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic run():void {\n\t\t\tthis.loading = new Loading(jQuery('#loading'), this.type);\n\t\t\tthis.loading.addEventListener('playButtonClick', this.playButtonClickHandler);\n\t\t\tthis.loading.ready();\n\t\t\tthis.loading.show();\n\n\t\t\tthis.videoContainer = new VideoContainer(this.filePaths);\n\t\t\tthis.videoContainer.ready();\n\t\t\tthis.videoContainer.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\tthis.videoContainer.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\tthis.videoContainer.addEventListener('loadComplete', this.videoLoadCompleteHandler);\n\t\t\tthis.videoContainer.addEventListener('loop', this.videoLoopHandler);\n\t\t\tthis.videoContainer.load();\n\t\t}\n\n\n\n\n\n\t\tprotected showVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.showVideo(videoIndex);\n\t\t}\n\n\t\tprotected hideVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.hideVideo(videoIndex);\n\t\t}\n\n\t\tprotected playVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.playVideo(videoIndex);\n\t\t}\n\n\t\tprotected pauseVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.pauseVideo(videoIndex);\n\t\t}\n\n\t\tprotected rewindVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.rewindVideo(videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load success : ' + this.filePaths[event.data]);\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load error : ' + this.filePaths[event.data]);\n\t\t};\n\n\t\tprivate videoLoadCompleteHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load complete');\n\t\t\tthis.loading.enablePlayButton();\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tconst videoIndex = event.data;\n\t\t\t//this.loading.appendMessage('loop : ' + this.filePaths[videoIndex]);\n\t\t\tthis.implLoop(videoIndex);\n\t\t};\n\n\t\tprivate playButtonClickHandler = (event:Event):void => {\n\t\t\tthis.loading.hide();\n\n\t\t\t// set fullscreen\n\t\t\ttrace('[Application] fullscreen capability :', screenfull.isEnabled);\n\t\t\tif (screenfull.isEnabled) {\n\t\t\t\tscreenfull['request']();\n\t\t\t}\n\n\t\t\t// setup interaction\n\t\t\tif (DeviceInfo.getIsTouchEnabled()) {\n\t\t\t\ttrace('[Application] setup with touch interaction');\n\t\t\t\twindow.addEventListener('touchstart', this.touchStartHandler);\n\t\t\t\twindow.addEventListener('touchend', this.touchEndHandler);\n\t\t\t} else {\n\t\t\t\ttrace('[Application] setup with mouse interaction');\n\t\t\t\twindow.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\t\twindow.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\t}\n\n\t\t\twindow.addEventListener('contextmenu', this.contextMenuHandler);\n\n\t\t\t// setup init state\n\t\t\tthis.videoContainer.show();\n\t\t\tthis.implPlay();\n\t\t};\n\n\n\n\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:TouchEvent):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate contextMenuHandler = (event:any):void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\n\n\n\n\t\tprotected implPlay():void {\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate filePaths:string[];\n\n\t\tprivate loading:Loading;\n\t\tprivate videoContainer:VideoContainer;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseARewind extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A - Rewind', ['a.mp4', 'b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// stop A\n\t\t\tthis.hideVideo(0);\n\t\t\tthis.pauseVideo(0);\n\t\t\tthis.rewindVideo(0);\n\n\t\t\t// play B\n\t\t\tthis.showVideo(1);\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// stop B\n\t\t\tthis.hideVideo(1);\n\t\t\tthis.pauseVideo(1);\n\t\t\tthis.rewindVideo(1);\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseASync extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A - Sync', ['a.mp4', 'b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\n\t\t\t// play B in background\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\tthis.activeVideoIndex = 1;\n\n\t\t\t// hide A\n\t\t\tthis.hideVideo(0);\n\n\t\t\t// show B\n\t\t\tthis.showVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// hide B\n\t\t\tthis.hideVideo(1);\n\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t\tif (videoIndex == this.activeVideoIndex) {\n\t\t\t\tthis.rewindVideo(1 - videoIndex);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate activeVideoIndex:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchPlayReleaseStop extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch Play & Release Stop', ['a.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// play A\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// pause A\n\t\t\tthis.pauseVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n"]}