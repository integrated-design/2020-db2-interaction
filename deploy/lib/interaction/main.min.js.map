{"version":3,"sources":["../src/lib/interaction/script/main.ts","../src/lib/interaction/script/view/Loading.ts","../src/lib/interaction/script/view/VideoContainer.ts","../src/lib/interaction/script/view/Video.ts","../src/lib/interaction/script/application/Application.ts","../src/lib/interaction/script/application/TouchPlayReleaseStop.ts","../src/lib/interaction/script/application/TouchBReleaseARewind.ts","../src/lib/interaction/script/application/TouchBReleaseASync.ts"],"names":["project","_super","View","alm","view","Loading","__extends","prototype","implInitialize","this","getView","typeField","find","text","type","playButton","addClass","logField","log","implReady","implFinalize","implShow","useTransition","cmd","Func","css","implHide","appendMessage","message","trace","html","enablePlayButton","removeClass","on","playButtonClickHandler","_this","call","event","dispatchEventType","initialize","VideoContainer","videos","videoCount","filePaths","length","i","video","Video","ready","append","push","load","loadedVideoCount","addEventListener","videoLoadSuccessHandler","videoLoadErrorHandler","videoLoopHandler","showVideo","videoIndex","show","hideVideo","hide","playVideo","play","pauseVideo","pause","rewindVideo","rewind","jQuery","getData","player","document","createElement","isLoading","isLoaded","isPlaying","filePath","autoplay","loop","muted","oncanplay","loadSuccessHandler","onerror","loadErrorHandler","onended","playerEndedHandler","src","Date","now","currentTime","loadEndAndDispatchEvent","eventType","DeviceInfo","browser","Application","start","loading","videoContainer","videoLoadCompleteHandler","implPlay","implTouchStart","implTouchEnd","implLoop","getIsTouchEnabled","window","touchStartHandler","touchEndHandler","mouseDownHandler","mouseUpHandler","TouchPlayReleaseStop","TouchBReleaseARewind","TouchBReleaseASync","activeVideoIndex","application"],"mappings":"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","file":"main.min.js","sourcesContent":["///<reference path=\"include.ts\" />\n\nnamespace project {\n\n\tlet application:Application = null;\n\n\tswitch (window['type']) {\n\t\tcase 0:\n\t\t\tapplication = new TouchPlayReleaseStop();\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tapplication = new TouchBReleaseARewind();\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tapplication = new TouchBReleaseASync();\n\t\t\tbreak;\n\t}\n\n\tif (application) {\n\t\tapplication.start();\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Loading extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:JQuery, type:string) {\n\t\t\tsuper(view);\n\n\t\t\tthis.type = type;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.typeField = view.find('#type');\n\t\t\tthis.typeField.text(this.type);\n\n\t\t\tthis.playButton = view.find('#play-button');\n\t\t\tthis.playButton.addClass('disabled');\n\t\t\tthis.playButton.text('LOADING');\n\n\t\t\tthis.logField = view.find('#log');\n\t\t\tthis.log = '';\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic appendMessage(message:string):void {\n\t\t\ttrace(message);\n\t\t\tthis.log += message + '<br>';\n\t\t\tthis.logField.html(this.log);\n\t\t}\n\n\t\tpublic enablePlayButton():void {\n\t\t\tthis.playButton.text('PLAY');\n\t\t\tthis.playButton.removeClass('disabled');\n\t\t\tthis.playButton.on('click', this.playButtonClickHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate playButtonClickHandler = (event:JQuery.ClickEvent):void => {\n\t\t\tthis.dispatchEventType('playButtonClick', this);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate typeField:JQuery;\n\n\t\tprivate playButton:JQuery;\n\n\t\tprivate log:string;\n\t\tprivate logField:JQuery;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\timport Event = alm.event.Event;\n\n\texport class VideoContainer extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(filePaths:string[]) {\n\t\t\tsuper(jQuery('#video-container'));\n\n\t\t\tthis.filePaths = filePaths;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.videos = [];\n\t\t\tthis.videoCount = this.filePaths.length;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = new Video(i, this.filePaths[i]);\n\t\t\t\tvideo.ready();\n\t\t\t\tview.append(video.getView());\n\t\t\t\tthis.videos.push(video);\n\t\t\t}\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tthis.loadedVideoCount = 0;\n\t\t\tfor (let i = 0; i < this.videoCount; ++i) {\n\t\t\t\tconst video = this.videos[i];\n\t\t\t\tvideo.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\t\tvideo.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\t\tvideo.addEventListener('loop', this.videoLoopHandler);\n\t\t\t\tvideo.load();\n\t\t\t}\n\t\t}\n\n\t\tpublic showVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].show();\n\t\t}\n\n\t\tpublic hideVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].hide();\n\t\t}\n\n\t\tpublic playVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].play();\n\t\t}\n\n\t\tpublic pauseVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].pause();\n\t\t}\n\n\t\tpublic rewindVideo(videoIndex:number):void {\n\t\t\tthis.videos[videoIndex].rewind();\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadSuccess', this, event.getData());\n\n\t\t\tif (++this.loadedVideoCount == this.videoCount) {\n\t\t\t\tthis.dispatchEventType('loadComplete', this);\n\t\t\t}\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loadError', this, event.getData());\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tthis.dispatchEventType('loop', this, event.getData());\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate filePaths:string[];\n\n\t\tprivate videos:Video[];\n\t\tprivate videoCount:number;\n\t\tprivate loadedVideoCount:number;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport View = alm.view.View;\n\n\texport class Video extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(videoIndex:number, filePath:string) {\n\t\t\tsuper();\n\n\t\t\tthis.videoIndex = videoIndex;\n\t\t\tthis.filePath = filePath;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('video');\n\n\t\t\tthis.player = document.createElement('video');\n\t\t\tview.append(jQuery(this.player));\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'block');\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Func(():void => {\n\t\t\t\tview.css('display', 'none');\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\ttrace('[Video] load start : url =', this.filePath);\n\n\t\t\tthis.player.autoplay = false;\n\t\t\tthis.player.loop = false;\n\t\t\tthis.player.muted = false;\n\t\t\tthis.player.oncanplay = this.loadSuccessHandler;\n\t\t\tthis.player.onerror = this.loadErrorHandler;\n\t\t\tthis.player.onended = this.playerEndedHandler;\n\t\t\tthis.player.src = this.filePath + '?' + Date.now();\n\t\t}\n\n\t\tpublic play():void {\n\t\t\tif (!this.isLoaded || this.isPlaying) return;\n\t\t\tthis.isPlaying = true;\n\n\t\t\tthis.player.play();\n\t\t}\n\n\t\tpublic pause():void {\n\t\t\tif (!this.isLoaded || !this.isPlaying) return;\n\t\t\tthis.isPlaying = false;\n\n\t\t\tthis.player.pause();\n\t\t}\n\n\t\tpublic rewind():void {\n\t\t\tif (!this.isLoaded) return;\n\n\t\t\tthis.player.currentTime = 0;\n\t\t}\n\n\n\n\n\n\t\tprivate loadEndAndDispatchEvent(eventType:string):void {\n\t\t\ttrace('[Video] load complete : video index =', this.videoIndex);\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = true;\n\n\t\t\tthis.player.oncanplay = null;\n\t\t\tthis.player.onerror = null;\n\n\t\t\tthis.dispatchEventType(eventType, this,  this.videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate loadSuccessHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadSuccess');\n\t\t};\n\n\t\tprivate loadErrorHandler = ():void => {\n\t\t\tthis.loadEndAndDispatchEvent('loadError');\n\t\t};\n\n\t\tprivate playerEndedHandler = ():void => {\n\t\t\tthis.player.play();\n\t\t\tthis.dispatchEventType('loop', this,  this.videoIndex);\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate videoIndex:number;\n\t\tprivate filePath:string;\n\n\t\tprivate isLoading:boolean;\n\t\tprivate isLoaded:boolean;\n\t\tprivate isPlaying:boolean;\n\t\tprivate player:HTMLVideoElement;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\timport Event = alm.event.Event;\n\timport DeviceInfo = alm.browser.DeviceInfo;\n\n\texport class Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(type:string, filePaths:string[]) {\n\t\t\tthis.type = type;\n\t\t\tthis.filePaths = filePaths;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tthis.loading = new Loading(jQuery('#loading'), this.type);\n\t\t\tthis.loading.addEventListener('playButtonClick', this.playButtonClickHandler);\n\t\t\tthis.loading.ready();\n\t\t\tthis.loading.show();\n\n\t\t\tthis.videoContainer = new VideoContainer(this.filePaths);\n\t\t\tthis.videoContainer.ready();\n\t\t\tthis.videoContainer.addEventListener('loadSuccess', this.videoLoadSuccessHandler);\n\t\t\tthis.videoContainer.addEventListener('loadError', this.videoLoadErrorHandler);\n\t\t\tthis.videoContainer.addEventListener('loadComplete', this.videoLoadCompleteHandler);\n\t\t\tthis.videoContainer.addEventListener('loop', this.videoLoopHandler);\n\t\t\tthis.videoContainer.load();\n\t\t}\n\n\n\n\n\n\t\tprotected showVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.showVideo(videoIndex);\n\t\t}\n\n\t\tprotected hideVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.hideVideo(videoIndex);\n\t\t}\n\n\t\tprotected playVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.playVideo(videoIndex);\n\t\t}\n\n\t\tprotected pauseVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.pauseVideo(videoIndex);\n\t\t}\n\n\t\tprotected rewindVideo(videoIndex:number):void {\n\t\t\tthis.videoContainer.rewindVideo(videoIndex);\n\t\t}\n\n\n\n\n\n\t\tprivate videoLoadSuccessHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load success : ' + this.filePaths[event.getData()]);\n\t\t};\n\n\t\tprivate videoLoadErrorHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load error : ' + this.filePaths[event.getData()]);\n\t\t};\n\n\t\tprivate videoLoadCompleteHandler = (event:Event):void => {\n\t\t\tthis.loading.appendMessage('load complete');\n\t\t\tthis.loading.enablePlayButton();\n\t\t};\n\n\t\tprivate videoLoopHandler = (event:Event):void => {\n\t\t\tconst videoIndex = event.getData();\n\t\t\t//this.loading.appendMessage('loop : ' + this.filePaths[videoIndex]);\n\t\t\tthis.implLoop(videoIndex);\n\t\t};\n\n\t\tprivate playButtonClickHandler = (event:Event):void => {\n\t\t\tthis.loading.hide();\n\n\t\t\t// setup interaction\n\t\t\tif (DeviceInfo.getIsTouchEnabled()) {\n\t\t\t\ttrace('[Application] setup with touch interaction');\n\t\t\t\twindow.addEventListener('touchstart', this.touchStartHandler);\n\t\t\t\twindow.addEventListener('touchend', this.touchEndHandler);\n\t\t\t} else {\n\t\t\t\ttrace('[Application] setup with mouse interaction');\n\t\t\t\twindow.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\t\twindow.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\t}\n\n\t\t\t// setup init state\n\t\t\tthis.videoContainer.show();\n\t\t\tthis.implPlay();\n\t\t};\n\n\n\n\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:TouchEvent):void => {\n\t\t\tthis.implTouchStart();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:TouchEvent):void => {\n\t\t\tthis.implTouchEnd();\n\t\t};\n\n\n\n\n\n\t\tprotected implPlay():void {\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate type:string;\n\t\tprivate filePaths:string[];\n\n\t\tprivate loading:Loading;\n\t\tprivate videoContainer:VideoContainer;\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchPlayReleaseStop extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch Play & Release Stop', ['data/a.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// play A\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// pause A\n\t\t\tthis.pauseVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseARewind extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A Rewind', ['data/a.mp4', 'data/b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\t// stop A\n\t\t\tthis.hideVideo(0);\n\t\t\tthis.pauseVideo(0);\n\t\t\tthis.rewindVideo(0);\n\n\t\t\t// play B\n\t\t\tthis.showVideo(1);\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\t// stop B\n\t\t\tthis.hideVideo(1);\n\t\t\tthis.pauseVideo(1);\n\t\t\tthis.rewindVideo(1);\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","///<reference path=\"../include.ts\" />\n\nnamespace project {\n\n\texport class TouchBReleaseASync extends Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper('Touch B & Release A (Sync)', ['data/a.mp4', 'data/b.mp4']);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implPlay():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// play A\n\t\t\tthis.showVideo(0);\n\t\t\tthis.playVideo(0);\n\n\t\t\t// play B in background\n\t\t\tthis.playVideo(1);\n\t\t}\n\n\t\tprotected implTouchStart():void {\n\t\t\tthis.activeVideoIndex = 1;\n\n\t\t\t// hide A\n\t\t\tthis.hideVideo(0);\n\n\t\t\t// show B\n\t\t\tthis.showVideo(1);\n\t\t}\n\n\t\tprotected implTouchEnd():void {\n\t\t\tthis.activeVideoIndex = 0;\n\n\t\t\t// hide B\n\t\t\tthis.hideVideo(1);\n\n\t\t\t// show A\n\t\t\tthis.showVideo(0);\n\t\t}\n\n\t\tprotected implLoop(videoIndex:number):void {\n\t\t\tif (videoIndex == this.activeVideoIndex) {\n\t\t\t\tthis.rewindVideo(1 - videoIndex);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate activeVideoIndex:number;\n\t}\n}\n"]}