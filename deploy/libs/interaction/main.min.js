var project,__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var o,e=alm.view.View,i=(__extends(n,o=e),n.prototype.implInitialize=function(){var t=this.getView();return this.typeField=t.find("#type"),this.typeField.text(this.type),this.playButton=t.find("#play-button"),this.playButton.addClass("disabled"),this.playButton.text("LOADING"),this.logField=t.find("#log"),this.log="",t},n.prototype.implReady=function(){},n.prototype.implFinalize=function(){},n.prototype.implShow=function(t,e){return new cmd.Func(function(){t.css("display","block")})},n.prototype.implHide=function(t,e){return new cmd.Func(function(){t.css("display","none")})},n.prototype.appendMessage=function(t){this.log+=t+"<br>",this.logField.html(this.log)},n.prototype.enablePlayButton=function(){this.playButton.text("PLAY"),this.playButton.removeClass("disabled"),this.playButton.on("click",this.playButtonClickHandler)},n);function n(t,e){var i=o.call(this,t)||this;return i.playButtonClickHandler=function(t){i.dispatchEventType("playButtonClick",i)},i.type=e,i.initialize(),i}t.Loading=i}(project=project||{}),function(o){var i,t=alm.view.View,e=(__extends(n,i=t),n.prototype.implInitialize=function(){var t=this.getView();this.videos=[],this.videoCount=this.filePaths.length;for(var e=0;e<this.videoCount;++e){var i=new o.Video(e,this.filePaths[e]);i.ready(),t.append(i.getView()),this.videos.push(i)}return t},n.prototype.implReady=function(){},n.prototype.implFinalize=function(){},n.prototype.implShow=function(t,e){return new cmd.Func(function(){t.css("display","block")})},n.prototype.implHide=function(t,e){return new cmd.Func(function(){t.css("display","none")})},n.prototype.load=function(){for(var t=this.loadedVideoCount=0;t<this.videoCount;++t){var e=this.videos[t];e.addEventListener("loadSuccess",this.videoLoadSuccessHandler),e.addEventListener("loadError",this.videoLoadErrorHandler),e.addEventListener("loop",this.videoLoopHandler),e.load()}},n.prototype.showVideo=function(t){this.videos[t].show()},n.prototype.hideVideo=function(t){this.videos[t].hide()},n.prototype.playVideo=function(t){this.videos[t].play()},n.prototype.pauseVideo=function(t){this.videos[t].pause()},n.prototype.rewindVideo=function(t){this.videos[t].rewind()},n);function n(t){var e=i.call(this,jQuery("#video-container"))||this;return e.videoLoadSuccessHandler=function(t){e.dispatchEventType("loadSuccess",e,t.getData()),++e.loadedVideoCount==e.videoCount&&e.dispatchEventType("loadComplete",e)},e.videoLoadErrorHandler=function(t){e.dispatchEventType("loadError",e,t.getData())},e.videoLoopHandler=function(t){e.dispatchEventType("loop",e,t.getData())},e.filePaths=t,e.initialize(),e}o.VideoContainer=e}(project=project||{}),function(t){var o,e=alm.view.View,i=(__extends(n,o=e),n.prototype.implInitialize=function(){var t=jQuery("<div>");return t.addClass("video"),this.player=document.createElement("video"),this.player.autoplay=!1,this.player.loop=!1,this.player.muted=!1,this.player.controls=!1,this.player.setAttribute("playsinline",""),t.append(jQuery(this.player)),this.isLoading=!1,this.isLoaded=!1,this.isPlaying=!1,t},n.prototype.implReady=function(){},n.prototype.implFinalize=function(){},n.prototype.implShow=function(t,e){return new cmd.Func(function(){t.css("display","block")})},n.prototype.implHide=function(t,e){return new cmd.Func(function(){t.css("display","none")})},n.prototype.load=function(){this.isLoading||this.isLoaded||(this.isLoading=!0,trace("[Video] load start : url =",this.filePath),this.player.oncanplay=this.loadSuccessHandler,this.player.onerror=this.loadErrorHandler,this.player.onended=this.playerEndedHandler,this.player.src=this.filePath+"?"+Date.now(),this.player.load())},n.prototype.play=function(){this.isLoaded&&!this.isPlaying&&(this.isPlaying=!0,this.player.play())},n.prototype.pause=function(){this.isLoaded&&this.isPlaying&&(this.isPlaying=!1,this.player.pause())},n.prototype.rewind=function(){this.isLoaded&&(this.player.currentTime=0)},n.prototype.loadEndAndDispatchEvent=function(t){trace("[Video] load complete : video index =",this.videoIndex),this.isLoading=!1,this.isLoaded=!0,this.player.oncanplay=null,this.player.onerror=null,this.dispatchEventType(t,this,this.videoIndex)},n);function n(t,e){var i=o.call(this)||this;return i.loadSuccessHandler=function(){i.loadEndAndDispatchEvent("loadSuccess")},i.loadErrorHandler=function(){i.loadEndAndDispatchEvent("loadError")},i.playerEndedHandler=function(){i.player.play(),i.dispatchEventType("loop",i,i.videoIndex)},i.videoIndex=t,i.filePath=e,i.initialize(),i}t.Video=i}(project=project||{}),function(t){var o=alm.browser.DeviceInfo,e=(i.prototype.start=function(){this.loading=new t.Loading(jQuery("#loading"),this.type),this.loading.addEventListener("playButtonClick",this.playButtonClickHandler),this.loading.ready(),this.loading.show(),this.videoContainer=new t.VideoContainer(this.filePaths),this.videoContainer.ready(),this.videoContainer.addEventListener("loadSuccess",this.videoLoadSuccessHandler),this.videoContainer.addEventListener("loadError",this.videoLoadErrorHandler),this.videoContainer.addEventListener("loadComplete",this.videoLoadCompleteHandler),this.videoContainer.addEventListener("loop",this.videoLoopHandler),this.videoContainer.load()},i.prototype.showVideo=function(t){this.videoContainer.showVideo(t)},i.prototype.hideVideo=function(t){this.videoContainer.hideVideo(t)},i.prototype.playVideo=function(t){this.videoContainer.playVideo(t)},i.prototype.pauseVideo=function(t){this.videoContainer.pauseVideo(t)},i.prototype.rewindVideo=function(t){this.videoContainer.rewindVideo(t)},i.prototype.implPlay=function(){},i.prototype.implTouchStart=function(){},i.prototype.implTouchEnd=function(){},i.prototype.implLoop=function(t){},i);function i(t,e){var i=this;this.videoLoadSuccessHandler=function(t){i.loading.appendMessage("load success : "+i.filePaths[t.getData()])},this.videoLoadErrorHandler=function(t){i.loading.appendMessage("load error : "+i.filePaths[t.getData()])},this.videoLoadCompleteHandler=function(t){i.loading.appendMessage("load complete"),i.loading.enablePlayButton()},this.videoLoopHandler=function(t){var e=t.getData();i.implLoop(e)},this.playButtonClickHandler=function(t){i.loading.hide(),trace("[Application] fullscreen capability :",screenfull.isEnabled),screenfull.isEnabled&&screenfull.request(),o.getIsTouchEnabled()?(trace("[Application] setup with touch interaction"),window.addEventListener("touchstart",i.touchStartHandler),window.addEventListener("touchend",i.touchEndHandler)):(trace("[Application] setup with mouse interaction"),window.addEventListener("mousedown",i.mouseDownHandler),window.addEventListener("mouseup",i.mouseUpHandler)),i.videoContainer.show(),i.implPlay()},this.touchStartHandler=function(t){t.preventDefault(),t.stopPropagation(),i.implTouchStart()},this.touchEndHandler=function(t){t.preventDefault(),t.stopPropagation(),i.implTouchEnd()},this.mouseDownHandler=function(t){t.preventDefault(),t.stopPropagation(),i.implTouchStart()},this.mouseUpHandler=function(t){t.preventDefault(),t.stopPropagation(),i.implTouchEnd()},this.type=t,this.filePaths=e}t.Application=e}(project=project||{}),function(t){var e,i=(e=t.Application,__extends(o,e),o.prototype.implPlay=function(){this.showVideo(0)},o.prototype.implTouchStart=function(){this.playVideo(0)},o.prototype.implTouchEnd=function(){this.pauseVideo(0)},o);function o(){return e.call(this,"Touch Play & Release Stop",["data/a.mp4"])||this}t.TouchPlayReleaseStop=i}(project=project||{}),function(t){var e,i=(e=t.Application,__extends(o,e),o.prototype.implPlay=function(){this.showVideo(0),this.playVideo(0)},o.prototype.implTouchStart=function(){this.hideVideo(0),this.pauseVideo(0),this.rewindVideo(0),this.showVideo(1),this.playVideo(1)},o.prototype.implTouchEnd=function(){this.hideVideo(1),this.pauseVideo(1),this.rewindVideo(1),this.showVideo(0),this.playVideo(0)},o);function o(){return e.call(this,"Touch B & Release A - Rewind",["data/a.mp4","data/b.mp4"])||this}t.TouchBReleaseARewind=i}(project=project||{}),function(t){var e,i=(e=t.Application,__extends(o,e),o.prototype.implPlay=function(){this.activeVideoIndex=0,this.showVideo(0),this.playVideo(0),this.playVideo(1)},o.prototype.implTouchStart=function(){this.activeVideoIndex=1,this.hideVideo(0),this.showVideo(1)},o.prototype.implTouchEnd=function(){this.activeVideoIndex=0,this.hideVideo(1),this.showVideo(0)},o.prototype.implLoop=function(t){t==this.activeVideoIndex&&this.rewindVideo(1-t)},o);function o(){return e.call(this,"Touch B & Release A - Sync",["data/a.mp4","data/b.mp4"])||this}t.TouchBReleaseASync=i}(project=project||{}),function(t){var e=null;switch(window.type){case 0:e=new t.TouchPlayReleaseStop;break;case 1:e=new t.TouchBReleaseARewind;break;case 2:e=new t.TouchBReleaseASync}e&&e.start()}(project=project||{});
//# sourceMappingURL=main.min.js.map
